
<div id='nodeSection1'>Lua</div>
<p><span class=rvts12><br></span></p>
<p><span class=rvts41>x = 123&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- global variable</span></p>
<p><span class=rvts58>local</span><span class=rvts41> y = 456&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- local variable</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts58>print</span><span class=rvts41>(</span><span class=rvts42>"Hello"</span><span class=rvts41> .. </span><span class=rvts42>" world!"</span><span class=rvts41>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- print a message</span></p>
<p><span class=rvts39><br></span></p>
<p><span class=rvts45>function</span><span class=rvts41> my_function()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- function</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts45>return</span><span class=rvts41> </span><span class=rvts42>"Hello World"</span></p>
<p><span class=rvts58>end</span></p>
<p><span class=rvts8><br></span></p>
<p><span class=rvts45>for</span><span class=rvts41> i = 1, 10 </span><span class=rvts45>do</span><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- loops</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts58>print</span><span class=rvts41>(i)</span></p>
<p><span class=rvts45>end</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>if</span><span class=rvts41> x == 123 </span><span class=rvts45>then</span><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- conditional processing</span></p>
<p><span class=rvts41>&nbsp; </span><span class=rvts58>print</span><span class=rvts41>(</span><span class=rvts42>"..."</span><span class=rvts41>)</span></p>
<p><span class=rvts45>else</span></p>
<p><span class=rvts41>&nbsp; </span><span class=rvts58>print</span><span class=rvts41>(</span><span class=rvts42>"..."</span><span class=rvts41>)</span></p>
<p><span class=rvts45>end</span></p>
<p><span class=rvts8><br></span></p>
<p><span class=rvts41>myArray = {</span><span class=rvts42>"David"</span><span class=rvts41>, 38, </span><span class=rvts45>true</span><span class=rvts41>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- define an array</span></p>
<p><span class=rvts41>myArray[3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- access an array (</span><span class=rvts44>the first element has the index 1</span><span class=rvts39>, not 0!)</span></p>
<p><span class=rvts39><br></span></p>
<p><span class=rvts41>myHashtable = {name = </span><span class=rvts42>"David"</span><span class=rvts41>, age = 38}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- define a hashtable</span></p>
<p><span class=rvts41>myHashtable[</span><span class=rvts42>"name"</span><span class=rvts41>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>-- access elements via index or property notation</span></p>
<p><span class=rvts41>myHashtable.age</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts39><br></span></p>
<div id='nodeSection2'>Examples</div>
<p><span class=rvts12><br></span></p>
<p><span class=rvts41>client.eval(</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts42>"return redis.call('GET', KEYS[1])"</span><span class=rvts41>,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; 1,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts42>"mykey"</span><span class=rvts41>,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts45>function</span><span class=rvts41> (err, reply) {</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(reply);</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; }</span></p>
<p><span class=rvts41>);</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>var</span><span class=rvts41> luaScript = </span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts42>"local elements = redis.call('ZRANGE', KEYS[1],"</span></p>
<p><span class=rvts41>&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts42>" 0, 0)\n"</span></p>
<p><span class=rvts41>&nbsp; + </span><span class=rvts42>"redis.call('ZREM', KEYS[1], elements[1])\n"</span></p>
<p><span class=rvts41>&nbsp; + </span><span class=rvts42>"return elements[1]"</span><span class=rvts41>;</span></p>
<p><span class=rvts41><br></span></p>
<p><br></p>
<p><br></p>

