
<div id='nodeSection1'>Route parameters</div>
<p><span class=rvts12><br></span></p>
<p><span class=rvts45>import</span><span class=rvts41> { Router,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ActivatedRoute,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Params&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </span><span class=rvts45>from</span><span class=rvts41> </span><span class=rvts42>"@angular/router"</span><span class=rvts41>;</span></p>
<p><span class=rvts45><br></span></p>
<p><span class=rvts45>import</span><span class=rvts41> </span><span class=rvts42>"rxjs/add/operator/switchMap"</span><span class=rvts41>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// this is required to evaluate the route parameters</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>constructor</span><span class=rvts41>(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// inject the rquired services into the component's constrcutor</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts45>private</span><span class=rvts41> router: </span><span class=rvts110>Router</span><span class=rvts41>,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts45>private</span><span class=rvts41> route: </span><span class=rvts110>ActivatedRoute</span><span class=rvts41>,</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span><span class=rvts45>private</span><span class=rvts41> location: </span><span class=rvts110>Location</span></p>
<p><span class=rvts41>) { }</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts41>ngOnInit(): </span><span class=rvts45>void</span><span class=rvts41> {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// route parameters are extracted during OnInit</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; </span></p>
<p><span class=rvts45>&nbsp;&nbsp;&nbsp; this</span><span class=rvts41>.route.params.switchMap(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// subscribe to the stream of parameters (i.e. the following code is</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (params: Params) =&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// executed wheneve the path/id changes)</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts45>this</span><span class=rvts41>.restService.get(+params[</span><span class=rvts42>"id"</span><span class=rvts41>])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// retrieve the relevant object</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; )</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; .subscribe(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// subscribe to the observable returned by the rest service</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; person =&gt; </span><span class=rvts45>this</span><span class=rvts41>.person = person&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// and use the returned data to initialise the component</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; );</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>&nbsp;&nbsp;&nbsp; this</span><span class=rvts41>.route.snapshot.params[</span><span class=rvts42>'id'</span><span class=rvts41>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// the current route parameter value (only delivers the initial value)</span></p>
<p><span class=rvts41>}</span></p>
<p><span class=rvts110><br></span></p>
<p><span class=rvts110><br></span></p>
<div id='nodeSection2'>Query strings and fragments</div>
<p><span class=rvts12><br></span></p>
<p><span class=rvts45>import</span><span class=rvts41> { NavigationExtras } </span><span class=rvts45>from</span><span class=rvts41> </span><span class=rvts42>"@angular/router"</span><span class=rvts41>;</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>let</span><span class=rvts41> navExtras: </span><span class=rvts110>NavigationExtras</span><span class=rvts41> = {</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; queryParams&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : { </span><span class=rvts42>"session_id"</span><span class=rvts41> : </span><span class=rvts42>"123"</span><span class=rvts41> },&nbsp; </span><span class=rvts39>// set query string parameters</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; fragment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : </span><span class=rvts42>"anchor"</span><span class=rvts41>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// ... and optionally an anchor tag / fragment</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; preserveQueryParams: </span><span class=rvts45>true</span><span class=rvts41>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// optionally: preserve these values when generating subsequent links</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; preserveFragment&nbsp;&nbsp; : </span><span class=rvts45>true</span></p>
<p><span class=rvts41>};</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>this</span><span class=rvts41>.router.navigate([</span><span class=rvts42>"/login"</span><span class=rvts41>], navExtras);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// navigate to the specified route and add query string and fragment</span></p>
<p><span class=rvts39><br></span></p>
<p class=rvps11><span class=rvts111><br></span></p>
<p><span class=rvts111><br></span></p>
<p><span class=rvts39><br></span></p>
<p><span class=rvts45>let</span><span class=rvts41> sessionId: </span><span class=rvts110>Observable</span><span class=rvts41>&lt;</span><span class=rvts45>string</span><span class=rvts41>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=rvts39>// query string and fragment are available as observables</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; = </span><span class=rvts45>this</span><span class=rvts41>.route.queryParams.map(</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params =&gt; params[</span><span class=rvts42>'session_id'</span><span class=rvts41>] || </span><span class=rvts42>'None'</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>
<p><span class=rvts41><br></span></p>
<p><span class=rvts45>let</span><span class=rvts41> fragment: </span><span class=rvts110>Observable</span><span class=rvts41>&lt;</span><span class=rvts45>string</span><span class=rvts41>&gt;</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp; = </span><span class=rvts45>this</span><span class=rvts41>.route.fragment.map(</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fragment =&gt; fragment || </span><span class=rvts42>'None'</span></p>
<p><span class=rvts41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>
<p><span class=rvts12><br></span></p>
<p><br></p>
<p><br></p>

